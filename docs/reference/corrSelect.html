<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Select Variable Subsets with Low Correlation (Data Frame Interface) — corrSelect • corrselect</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Select Variable Subsets with Low Correlation (Data Frame Interface) — corrSelect"><meta name="description" content="Identifies combinations of numeric variables in a data frame such that all pairwise absolute correlations
fall below a specified threshold. This function is a wrapper around MatSelect()
and accepts data frames, tibbles, or data tables with automatic preprocessing."><meta property="og:description" content="Identifies combinations of numeric variables in a data frame such that all pairwise absolute correlations
fall below a specified threshold. This function is a wrapper around MatSelect()
and accepts data frames, tibbles, or data tables with automatic preprocessing."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">corrselect</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/quickstart.html">Quick Start</a></li>
    <li><a class="dropdown-item" href="../articles/workflows.html">Complete Workflows: Real-World Examples</a></li>
    <li><a class="dropdown-item" href="../articles/comparison.html">Comparison with Alternatives</a></li>
    <li><a class="dropdown-item" href="../articles/advanced.html">Advanced Topics</a></li>
    <li><a class="dropdown-item" href="../articles/theory.html">Theory and Formulation</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gcol33/corrselect/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Select Variable Subsets with Low Correlation (Data Frame Interface)</h1>
      <small class="dont-index">Source: <a href="https://github.com/gcol33/corrselect/blob/HEAD/R/corrSelect.R" class="external-link"><code>R/corrSelect.R</code></a></small>
      <div class="d-none name"><code>corrSelect.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Identifies combinations of numeric variables in a data frame such that all pairwise absolute correlations
fall below a specified threshold. This function is a wrapper around <code><a href="MatSelect.html">MatSelect()</a></code>
and accepts data frames, tibbles, or data tables with automatic preprocessing.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">corrSelect</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0.7</span>,</span>
<span>  method <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  force_in <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cor_method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pearson"</span>, <span class="st">"spearman"</span>, <span class="st">"kendall"</span>, <span class="st">"bicor"</span>, <span class="st">"distance"</span>, <span class="st">"maximal"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>A data frame. Only numeric columns are used.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>A numeric value in (0, 1). Maximum allowed absolute correlation. Defaults to 0.7.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Character. Selection algorithm to use. One of <code>"els"</code> or
<code>"bron-kerbosch"</code>. If not specified, the function chooses automatically:
<code>"els"</code> when <code>force_in</code> is provided, otherwise <code>"bron-kerbosch"</code>.</p></dd>


<dt id="arg-force-in">force_in<a class="anchor" aria-label="anchor" href="#arg-force-in"></a></dt>
<dd><p>Optional character vector or numeric indices of columns to force into all subsets.</p></dd>


<dt id="arg-cor-method">cor_method<a class="anchor" aria-label="anchor" href="#arg-cor-method"></a></dt>
<dd><p>Character string indicating which correlation method to use.
One of <code>"pearson"</code> (default), <code>"spearman"</code>, <code>"kendall"</code>,
<code>"bicor"</code>, <code>"distance"</code>, or <code>"maximal"</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="MatSelect.html">MatSelect()</a></code>, e.g., <code>use_pivot</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code><a href="CorrCombo.html">CorrCombo</a></code>, containing selected subsets and correlation statistics.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Only numeric columns are used for correlation analysis. Non‐numeric columns (factors, characters,
logicals, etc.) are ignored, and their names and types are printed to inform the user. These can be
optionally reattached later using <code><a href="corrSubset.html">corrSubset()</a></code> with <code>keepExtra = TRUE</code>.</p>
<p>Rows with missing values are removed before computing correlations. A warning is issued if any rows are dropped.</p>
<p>The <code>cor_method</code> controls how the correlation matrix is computed:</p><ul><li><p><code>"pearson"</code>: Standard linear correlation.</p></li>
<li><p><code>"spearman"</code>: Rank-based monotonic correlation.</p></li>
<li><p><code>"kendall"</code>: Kendall's tau.</p></li>
<li><p><code>"bicor"</code>: Biweight midcorrelation (WGCNA::bicor).</p></li>
<li><p><code>"distance"</code>: Distance correlation (energy::dcor).</p></li>
<li><p><code>"maximal"</code>: Maximal information coefficient (minerva::mine).</p></li>
</ul><p>For <code>"bicor"</code>, <code>"distance"</code>, and <code>"maximal"</code>, the corresponding
package must be installed.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="assocSelect.html">assocSelect()</a></code>, <code><a href="MatSelect.html">MatSelect()</a></code>, <code><a href="corrSubset.html">corrSubset()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">100</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create 20 variables: 5 blocks of correlated variables + some noise</span></span></span>
<span class="r-in"><span><span class="va">block1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="fl">4</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">block2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">block2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">block2</span>, <span class="fl">4</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="fl">4</span>, sd <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">block3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="fl">4</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">block4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="fl">4</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">block5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="fl">4</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">block1</span>, <span class="va">block2</span>, <span class="va">block3</span>, <span class="va">block4</span>, <span class="va">block5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"V"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add a non-numeric column to be ignored</span></span></span>
<span class="r-in"><span><span class="va">df</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic usage</span></span></span>
<span class="r-in"><span><span class="fu">corrSelect</span><span class="op">(</span><span class="va">df</span>, threshold <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following variables were excluded from the correlation analysis:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - label: unordered factor (excluded)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CorrCombo object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Method:      bron-kerbosch</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Correlation: pearson</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Threshold:   0.800</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Subsets:     4 valid combinations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Data Rows:   100 used in correlation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Pivot:       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Top combinations:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   No.  Variables                          Avg    Max    Size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 1] V1, V2, V3, V4, V7, V9, ...       0.075  0.241    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 2] V1, V2, V3, V4, V6, V9, ...       0.075  0.259    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 3] V1, V2, V3, V4, V8, V9, ...       0.075  0.269    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 4] V1, V2, V3, V4, V5, V9, ...       0.076  0.288    17</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Try Bron–Kerbosch with pivoting</span></span></span>
<span class="r-in"><span><span class="fu">corrSelect</span><span class="op">(</span><span class="va">df</span>, threshold <span class="op">=</span> <span class="fl">0.6</span>, method <span class="op">=</span> <span class="st">"bron-kerbosch"</span>, use_pivot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following variables were excluded from the correlation analysis:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - label: unordered factor (excluded)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CorrCombo object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Method:      bron-kerbosch</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Correlation: pearson</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Threshold:   0.600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Subsets:     4 valid combinations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Data Rows:   100 used in correlation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Pivot:       TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Top combinations:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   No.  Variables                          Avg    Max    Size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 1] V1, V2, V3, V4, V7, V9, ...       0.075  0.241    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 2] V1, V2, V3, V4, V6, V9, ...       0.075  0.259    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 3] V1, V2, V3, V4, V8, V9, ...       0.075  0.269    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 4] V1, V2, V3, V4, V5, V9, ...       0.076  0.288    17</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Force in a specific variable and use Spearman correlation</span></span></span>
<span class="r-in"><span><span class="fu">corrSelect</span><span class="op">(</span><span class="va">df</span>, threshold <span class="op">=</span> <span class="fl">0.6</span>, force_in <span class="op">=</span> <span class="st">"V10"</span>, cor_method <span class="op">=</span> <span class="st">"spearman"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following variables were excluded from the correlation analysis:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   - label: unordered factor (excluded)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CorrCombo object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Method:      els</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Correlation: spearman</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Threshold:   0.600</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Subsets:     4 valid combinations</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Data Rows:   100 used in correlation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Forced-in:   V10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Top combinations:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   No.  Variables                          Avg    Max    Size</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ------------------------------------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 1] V1, V2, V3, V4, V7, V9, ...       0.076  0.239    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 2] V1, V2, V3, V4, V5, V9, ...       0.076  0.269    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 3] V1, V2, V3, V4, V8, V9, ...       0.076  0.246    17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [ 4] V1, V2, V3, V4, V6, V9, ...       0.076  0.252    17</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gilles Colling.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

